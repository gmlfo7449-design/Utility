<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ì‚¬ë‹¤ë¦¬ê²Œì„ â€“ ì˜¨ë¼ì¸ ë¬´ë£Œ ì‚¬ë‹¤ë¦¬íƒ€ê¸° | íˆ´íˆ´ë²„ìŠ¤</title>
<meta name="description" content="ì´ë¦„ì„ ì…ë ¥í•˜ê³  ë‹¹ì²¨ ì¸ì›ì„ ì„¤ì •í•˜ë©´ ìë™ìœ¼ë¡œ ì‚¬ë‹¤ë¦¬ë¥¼ ë§Œë“¤ì–´ë“œë¦½ë‹ˆë‹¤. 2~8ëª…ê¹Œì§€ ì§€ì›. ì„¤ì¹˜ ì—†ì´ ë¸Œë¼ìš°ì €ì—ì„œ ë°”ë¡œ ì‚¬ìš©. ê²°ê³¼ ê³µìœ  ê¸°ëŠ¥ ì œê³µ.">
<meta name="keywords" content="ì‚¬ë‹¤ë¦¬ê²Œì„, ì‚¬ë‹¤ë¦¬íƒ€ê¸°, ì˜¨ë¼ì¸ ì‚¬ë‹¤ë¦¬, ë¬´ë£Œ ì‚¬ë‹¤ë¦¬, ë‹¹ì²¨ ì‚¬ë‹¤ë¦¬, ì œë¹„ë½‘ê¸°, ëœë¤ ë½‘ê¸°, ì‚¬ë‹¤ë¦¬ ë§Œë“¤ê¸°">
<meta name="robots" content="index, follow">
<link rel="canonical" href="https://webtoolbox.kr/ladder-game/">
<meta name="author" content="íˆ´íˆ´ë²„ìŠ¤">
<meta name="theme-color" content="#2563eb">
<meta name="naver-site-verification" content="5e9a56917967bb84866e9ace3791471381201008">

<!-- Open Graph -->
<meta property="og:title" content="ì‚¬ë‹¤ë¦¬ê²Œì„ â€“ ì˜¨ë¼ì¸ ë¬´ë£Œ ì‚¬ë‹¤ë¦¬íƒ€ê¸°">
<meta property="og:description" content="ì´ë¦„ ì…ë ¥ â†’ ë‹¹ì²¨ ì¸ì› ì„¤ì • â†’ ì‚¬ë‹¤ë¦¬ ìë™ ìƒì„±. 2~8ëª…, ê²°ê³¼ ê³µìœ ê¹Œì§€.">
<meta property="og:type" content="website">
<meta property="og:url" content="https://webtoolbox.kr/ladder-game/">
<meta property="og:site_name" content="íˆ´íˆ´ë²„ìŠ¤">
<meta property="og:locale" content="ko_KR">
<meta property="og:image" content="https://webtoolbox.kr/og-image.png">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">

<!-- Twitter -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="ì‚¬ë‹¤ë¦¬ê²Œì„ â€“ ì˜¨ë¼ì¸ ë¬´ë£Œ ì‚¬ë‹¤ë¦¬íƒ€ê¸°">
<meta name="twitter:description" content="ì´ë¦„ ì…ë ¥ â†’ ë‹¹ì²¨ ì¸ì› ì„¤ì • â†’ ì‚¬ë‹¤ë¦¬ ìë™ ìƒì„±. ê²°ê³¼ ê³µìœ ê¹Œì§€.">
<meta name="twitter:image" content="https://webtoolbox.kr/og-image.png">

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-545RVVZN');</script>
<!-- End Google Tag Manager -->

<!-- JSON-LD: WebApplication -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebApplication",
  "name": "ì‚¬ë‹¤ë¦¬ê²Œì„",
  "description": "ì˜¨ë¼ì¸ ë¬´ë£Œ ì‚¬ë‹¤ë¦¬íƒ€ê¸°. 2~8ëª… ì°¸ì—¬, ë‹¹ì²¨ ì¸ì› ì„¤ì •, ì• ë‹ˆë©”ì´ì…˜ ê²°ê³¼ ê³µê°œ, ê²°ê³¼ ê³µìœ  ê¸°ëŠ¥ ì œê³µ.",
  "url": "https://webtoolbox.kr/ladder-game/",
  "applicationCategory": "GameApplication",
  "operatingSystem": "Any",
  "offers": { "@type": "Offer", "price": "0", "priceCurrency": "KRW" },
  "isPartOf": { "@type": "WebSite", "name": "íˆ´íˆ´ë²„ìŠ¤", "url": "https://webtoolbox.kr" }
}
</script>

<!-- JSON-LD: FAQPage -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "ì‚¬ë‹¤ë¦¬ê²Œì„ì€ ì–´ë–»ê²Œ ì‚¬ìš©í•˜ë‚˜ìš”?",
      "acceptedAnswer": { "@type": "Answer", "text": "ì°¸ì—¬ ì¸ì›(2~8ëª…)ì„ ì„¤ì •í•˜ê³  ì´ë¦„ì„ ì…ë ¥í•œ ë’¤, ë‹¹ì²¨ ì¸ì›ì„ ì •í•˜ê³  'ì‚¬ë‹¤ë¦¬ ìƒì„±' ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ë©ë‹ˆë‹¤. ì´ë¦„ ì¹´ë“œë¥¼ í´ë¦­í•˜ë©´ í•´ë‹¹ ì‚¬ëŒì˜ ì‚¬ë‹¤ë¦¬ ê²½ë¡œê°€ ì• ë‹ˆë©”ì´ì…˜ìœ¼ë¡œ ê³µê°œë©ë‹ˆë‹¤." }
    },
    {
      "@type": "Question",
      "name": "ê²°ê³¼ê°€ ê³µì •í•œê°€ìš”?",
      "acceptedAnswer": { "@type": "Answer", "text": "ë„¤. ì‚¬ë‹¤ë¦¬ ê°€ë¡œì¤„ê³¼ ë‹¹ì²¨ ë°°ì¹˜ëŠ” ëª¨ë‘ ë¸Œë¼ìš°ì €ì˜ ëœë¤ í•¨ìˆ˜ë¡œ ìƒì„±ë˜ë©°, ì„œë²„ì™€ í†µì‹ í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë§¤ë²ˆ ìƒˆë¡œìš´ ì‚¬ë‹¤ë¦¬ê°€ ëœë¤ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤." }
    },
    {
      "@type": "Question",
      "name": "ìµœëŒ€ ëª‡ ëª…ê¹Œì§€ ì°¸ì—¬í•  ìˆ˜ ìˆë‚˜ìš”?",
      "acceptedAnswer": { "@type": "Answer", "text": "ìµœì†Œ 2ëª…ë¶€í„° ìµœëŒ€ 8ëª…ê¹Œì§€ ì°¸ì—¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¹ì²¨ ì¸ì›ì€ 1ëª…ë¶€í„° (ì „ì²´ ì¸ì› - 1)ëª…ê¹Œì§€ ììœ ë¡­ê²Œ ì„¤ì • ê°€ëŠ¥í•©ë‹ˆë‹¤." }
    },
    {
      "@type": "Question",
      "name": "ê²°ê³¼ë¥¼ ê³µìœ í•  ìˆ˜ ìˆë‚˜ìš”?",
      "acceptedAnswer": { "@type": "Answer", "text": "ë„¤. ëª¨ë“  ê²°ê³¼ê°€ ê³µê°œëœ í›„ 'ê²°ê³¼ ë³µì‚¬' ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ í…ìŠ¤íŠ¸ í˜•íƒœë¡œ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì–´ ì¹´ì¹´ì˜¤í†¡, ë©”ì‹œì§€ ë“±ìœ¼ë¡œ ì‰½ê²Œ ê³µìœ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤." }
    }
  ]
}
</script>

<!-- JSON-LD: BreadcrumbList -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    { "@type": "ListItem", "position": 1, "name": "íˆ´íˆ´ë²„ìŠ¤", "item": "https://webtoolbox.kr" },
    { "@type": "ListItem", "position": 2, "name": "ì‚¬ë‹¤ë¦¬ê²Œì„", "item": "https://webtoolbox.kr/ladder-game/" }
  ]
}
</script>

<!-- íŒŒë¹„ì½˜ -->
<link rel="icon" type="image/x-icon" href="/favicon.ico">
<link rel="icon" type="image/x-icon" sizes="48x48" href="/favicon-48x48.ico">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon.png">
<link rel="icon" type="image/png" sizes="512x512" href="/favicon_512.png">
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;700;800&family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
<style>
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box;}
:root{
  --bg:#f6f7f9;--surface:#fff;--border:#e4e6eb;
  --text:#1a1c20;--sub:#5f6368;--muted:#9aa0a8;
  --accent:#2563eb;--accent-l:#eff4ff;--accent-d:#1d4ed8;
  --win:#16a34a;--win-l:#dcfce7;--win-b:#bbf7d0;
  --lose:#dc2626;--lose-l:#fef2f2;--lose-b:#fecaca;
  --r:14px;--rs:10px;--rx:7px;
  --sh:0 1px 3px rgba(0,0,0,.04),0 1px 2px rgba(0,0,0,.06);
}
body{font-family:'Noto Sans KR',sans-serif;background:var(--bg);color:var(--text);-webkit-font-smoothing:antialiased;min-height:100vh;}

/* NAV */
.nav{background:rgba(255,255,255,.93);border-bottom:1px solid var(--border);position:sticky;top:0;z-index:100;backdrop-filter:blur(12px);}
.nav-inner{max-width:1080px;margin:0 auto;padding:0 24px;height:56px;display:flex;align-items:center;justify-content:space-between;}
.nav-logo{display:flex;align-items:center;gap:8px;text-decoration:none;color:var(--text);}
.nav-logo img{width:30px;height:30px;border-radius:7px;}
.nav-logo-text{font-family:'Outfit';font-weight:700;font-size:17px;}
.nav-back{display:flex;align-items:center;gap:6px;text-decoration:none;color:var(--sub);font-size:13px;font-weight:500;padding:7px 14px;border-radius:8px;transition:all .2s;min-height:36px;}
.nav-back:hover{background:var(--accent-l);color:var(--accent);}

/* HERO */
.hero{max-width:1080px;margin:0 auto;padding:36px 24px 24px;text-align:center;}
.badge{display:inline-flex;align-items:center;gap:6px;background:var(--accent-l);color:var(--accent);font-size:12px;font-weight:600;padding:4px 12px;border-radius:20px;margin-bottom:12px;}
.hero h1{font-family:'Outfit';font-size:34px;font-weight:800;letter-spacing:-1px;margin-bottom:8px;}
.hero p{font-size:14px;color:var(--sub);}



/* LAYOUT */
.main{max-width:1080px;margin:0 auto;padding:0 24px 40px;display:grid;grid-template-columns:300px 1fr;gap:16px;align-items:start;}

/* PANEL */
.panel{background:var(--surface);border:1px solid var(--border);border-radius:var(--r);box-shadow:var(--sh);overflow:hidden;}
.ph{padding:14px 18px 12px;border-bottom:1px solid var(--border);display:flex;align-items:center;gap:8px;}
.ph-icon{width:26px;height:26px;background:var(--accent-l);border-radius:6px;display:flex;align-items:center;justify-content:center;font-size:12px;}
.ph-title{font-size:13px;font-weight:700;}
.pb{padding:14px 18px;}

/* LABELS */
.lbl{font-size:11px;font-weight:700;color:var(--muted);letter-spacing:.5px;text-transform:uppercase;margin-bottom:7px;}

/* COUNT ROW */
.crow{display:flex;align-items:center;background:var(--bg);border:1.5px solid var(--border);border-radius:var(--rs);overflow:hidden;margin-bottom:16px;}
.cbtn{width:44px;height:40px;border:none;background:transparent;font-size:20px;cursor:pointer;color:var(--sub);transition:all .15s;display:flex;align-items:center;justify-content:center;flex-shrink:0;}
.cbtn:hover:not(:disabled){background:var(--accent-l);color:var(--accent);}
.cbtn:disabled{opacity:.3;cursor:not-allowed;}
.cmid{flex:1;text-align:center;border-left:1px solid var(--border);border-right:1px solid var(--border);}
.cnum{font-family:'Outfit';font-size:20px;font-weight:700;color:var(--accent);display:block;padding-top:4px;}
.cunit{font-size:10px;color:var(--muted);padding-bottom:3px;display:block;}

/* NAME LIST */
.name-list{display:flex;flex-direction:column;gap:4px;margin-bottom:4px;}
.name-row{display:grid;grid-template-columns:18px 1fr;gap:7px;align-items:center;}
.name-idx{font-size:11px;font-weight:700;color:var(--muted);text-align:center;}
.name-input{width:100%;padding:8px 10px;border:1.5px solid var(--border);border-radius:var(--rx);font-size:13px;font-weight:500;font-family:'Noto Sans KR';color:var(--text);background:var(--bg);outline:none;transition:all .15s;min-height:36px;}
.name-input:focus{border-color:var(--accent);background:var(--surface);box-shadow:0 0 0 3px rgba(37,99,235,.08);}

/* WIN COUNT */
.win-section{margin-top:14px;}
.win-row{display:flex;align-items:center;gap:8px;}
.win-label-main{font-size:13px;font-weight:600;flex:1;}
.win-badge{display:inline-flex;align-items:center;gap:3px;background:var(--win-l);color:var(--win);border:1px solid var(--win-b);padding:2px 9px;border-radius:20px;font-size:11px;font-weight:700;}
.win-count-ctrl{display:flex;align-items:center;gap:0;background:var(--bg);border:1.5px solid var(--border);border-radius:8px;overflow:hidden;}
.wcbtn{width:36px;height:34px;border:none;background:transparent;font-size:16px;cursor:pointer;color:var(--sub);transition:all .15s;display:flex;align-items:center;justify-content:center;}
.wcbtn:hover:not(:disabled){background:var(--win-l);color:var(--win);}
.wcbtn:disabled{opacity:.3;cursor:not-allowed;}
.wcnum{width:34px;text-align:center;font-family:'Outfit';font-size:15px;font-weight:700;color:var(--win);border-left:1px solid var(--border);border-right:1px solid var(--border);}
.win-preview{margin-top:9px;display:flex;flex-wrap:wrap;gap:4px;}
.win-chip{font-size:10px;font-weight:600;padding:2px 8px;border-radius:20px;border:1px solid;}
.win-chip.w{background:var(--win-l);color:var(--win);border-color:var(--win-b);}
.win-chip.l{background:var(--lose-l);color:var(--lose);border-color:var(--lose-b);}

.divider{height:1px;background:var(--border);margin:14px 0;}

/* BUTTONS */
.btn{width:100%;padding:11px;border-radius:var(--rs);font-size:14px;font-weight:700;font-family:'Noto Sans KR';cursor:pointer;border:none;transition:all .2s;display:flex;align-items:center;justify-content:center;gap:6px;min-height:44px;}
.btn-p{background:var(--accent);color:#fff;}
.btn-p:hover{background:var(--accent-d);transform:translateY(-1px);box-shadow:0 6px 18px rgba(37,99,235,.28);}
.btn-p:active{transform:translateY(0);}
.btn-s{background:transparent;color:var(--sub);border:1.5px solid var(--border);margin-top:6px;font-size:13px;padding:9px;min-height:40px;}
.btn-s:hover{border-color:var(--accent);color:var(--accent);background:var(--accent-l);}

/* CANVAS PANEL */
.cp{background:var(--surface);border:1px solid var(--border);border-radius:var(--r);box-shadow:var(--sh);overflow:hidden;}
.cphead{padding:14px 18px;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;}
.cphl{display:flex;align-items:center;gap:8px;}
.cp-title{font-size:13px;font-weight:700;}
.status{font-size:11px;color:var(--muted);background:var(--bg);padding:3px 10px;border-radius:20px;border:1px solid var(--border);transition:all .3s;}
.status.active{background:var(--accent-l);color:var(--accent);border-color:#bfdbfe;}
.status.done{background:var(--win-l);color:var(--win);border-color:var(--win-b);}
.cwrap{padding:16px;min-height:400px;display:flex;align-items:center;justify-content:center;}
.empty{display:flex;flex-direction:column;align-items:center;gap:10px;color:var(--muted);}
.empty-icon{width:56px;height:56px;background:var(--bg);border-radius:14px;display:flex;align-items:center;justify-content:center;font-size:24px;border:1.5px dashed var(--border);}
#cv{display:block;width:100%;}

/* RESULT CARDS */
.ra{border-top:1px solid var(--border);padding:14px 16px 16px;}
.ra-lbl{font-size:11px;font-weight:700;color:var(--muted);letter-spacing:.5px;text-transform:uppercase;margin-bottom:9px;}
.rgrid{display:grid;grid-template-columns:repeat(auto-fill,minmax(85px,1fr));gap:6px;margin-bottom:10px;}
.rc{border:1.5px solid var(--border);border-radius:var(--rs);padding:10px 7px;text-align:center;cursor:pointer;transition:all .2s;background:var(--bg);border-top-width:3px;min-height:60px;}
.rc:hover:not(.revealed):not(.running){border-color:var(--accent);background:var(--accent-l);transform:translateY(-2px);box-shadow:0 4px 12px rgba(37,99,235,.15);}
.rc.running{cursor:wait;animation:cpulse 1s ease infinite;}
.rc.revealed{cursor:default;}
@keyframes cpulse{0%,100%{box-shadow:0 0 0 0 rgba(37,99,235,.12)}50%{box-shadow:0 0 0 5px rgba(37,99,235,0)}}
.rc-name{font-size:11px;font-weight:700;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-bottom:2px;}
.rc-result{font-size:12px;font-weight:700;color:var(--muted);}
.rc-hint{font-size:10px;color:var(--muted);margin-top:2px;}
.rc.revealed .rc-hint{display:none;}
.brow{display:flex;gap:6px;}
.bsm{flex:1;padding:9px 0;border-radius:var(--rs);font-size:12px;font-weight:700;font-family:'Noto Sans KR';cursor:pointer;border:none;transition:all .2s;min-height:38px;display:flex;align-items:center;justify-content:center;gap:4px;}
.bsm-p{background:var(--accent);color:#fff;}
.bsm-p:hover{background:var(--accent-d);}
.bsm-g{background:var(--bg);color:var(--sub);border:1.5px solid var(--border);}
.bsm-g:hover{border-color:var(--accent);color:var(--accent);background:var(--accent-l);}
.bsm-share{background:var(--win-l);color:var(--win);border:1.5px solid var(--win-b);}
.bsm-share:hover{background:var(--win);color:#fff;}
.bsm-share:disabled{opacity:.4;cursor:not-allowed;}

/* TOAST */
.toast{position:fixed;bottom:28px;left:50%;transform:translateX(-50%) translateY(14px);background:var(--text);color:#fff;padding:10px 20px;border-radius:9px;font-size:13px;font-weight:600;opacity:0;transition:all .3s;z-index:999;pointer-events:none;white-space:nowrap;}
.toast.show{opacity:1;transform:translateX(-50%) translateY(0);}

/* Usage & FAQ below grid */
.below-grid{max-width:1080px;margin:0 auto;padding:0 24px 60px;}
.usage-section{margin-bottom:32px;}
.usage-section h2{font-size:20px;font-weight:700;margin-bottom:10px;}
.usage-desc{color:var(--sub);font-size:14px;line-height:1.8;}
.faq-section h2{font-size:20px;font-weight:700;margin-bottom:14px;}
.faq-item{background:var(--surface);border:1px solid var(--border);border-radius:var(--rs);margin-bottom:8px;overflow:hidden;}
.faq-q{padding:13px 16px;font-weight:500;font-size:14px;cursor:pointer;display:flex;justify-content:space-between;align-items:center;gap:12px;min-height:48px;user-select:none;-webkit-user-select:none;}
.faq-q::after{content:'+';font-size:20px;color:var(--muted);transition:transform .2s;flex-shrink:0;}
.faq-item.open .faq-q::after{transform:rotate(45deg);}
.faq-a{max-height:0;overflow:hidden;transition:max-height .3s ease;}
.faq-a-inner{padding:0 16px 13px;color:var(--sub);font-size:13px;line-height:1.8;}
.faq-item.open .faq-a{max-height:300px;}

@media(max-width:768px){
  .main{grid-template-columns:1fr;}
  .hero{padding:28px 20px 18px;}
  .hero h1{font-size:26px;}
  .hero p{font-size:13px;}
  .main{padding:0 16px 30px;}
  .below-grid{padding:0 16px 50px;}
  .pb{padding:12px 14px;}
  .ph{padding:12px 14px 10px;}
  .cphead{padding:12px 14px;}
  .cwrap{padding:10px;min-height:320px;}
  .ra{padding:12px 14px 14px;}
  .rgrid{grid-template-columns:repeat(auto-fill,minmax(75px,1fr));gap:5px;}
  .rc{padding:8px 5px;min-height:54px;}
  .rc-name{font-size:10px;}
  .rc-result{font-size:11px;}
  .settings-row{gap:8px;}
  .btn{min-height:44px;}
  .bsm{min-height:38px;}
}
</style>
</head>
<body>
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-545RVVZN"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

<nav class="nav" aria-label="ë©”ì¸ ë„¤ë¹„ê²Œì´ì…˜">
  <div class="nav-inner">
    <a href="/" class="nav-logo" aria-label="íˆ´íˆ´ë²„ìŠ¤ í™ˆ">
      <img src="/favicon.png" alt="íˆ´íˆ´ë²„ìŠ¤" width="30" height="30">
      <span class="nav-logo-text">íˆ´íˆ´ë²„ìŠ¤</span>
    </a>
    <a href="/" class="nav-back" aria-label="ì „ì²´ ë„êµ¬ ëª©ë¡ìœ¼ë¡œ">
      <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
      ì „ì²´ ë„êµ¬
    </a>
  </div>
</nav>

<section class="hero">
  <div class="badge">ğŸ² ë¬´ë£Œ ê²Œì„ ë„êµ¬</div>
  <h1>ì‚¬ë‹¤ë¦¬ê²Œì„</h1>
  <p>ì´ë¦„ì„ ì…ë ¥í•˜ê³  ë‹¹ì²¨ ì¸ì›ì„ ì„¤ì •í•˜ë©´ ë°”ë¡œ ì‹œì‘ë©ë‹ˆë‹¤</p>
</section>

<div class="main">
  <!-- ì™¼ìª½ -->
  <div>
    <div class="panel">
      <div class="ph"><div class="ph-icon">ğŸ‘¥</div><div class="ph-title">ì°¸ì—¬ì ì„¤ì •</div></div>
      <div class="pb">

        <div class="lbl">ì°¸ì—¬ ì¸ì›</div>
        <div class="crow">
          <button class="cbtn" id="bMinus" onclick="changeCount(-1)" aria-label="ì¸ì› ê°ì†Œ">âˆ’</button>
          <div class="cmid">
            <span class="cnum" id="cNum">4</span>
            <span class="cunit">ëª…</span>
          </div>
          <button class="cbtn" id="bPlus" onclick="changeCount(1)" aria-label="ì¸ì› ì¦ê°€">+</button>
        </div>

        <div class="lbl">ì´ë¦„ ì…ë ¥</div>
        <div class="name-list" id="nameList"></div>

        <div class="win-section">
          <div class="divider"></div>
          <div class="lbl">ë‹¹ì²¨ ì„¤ì •</div>
          <div class="win-row">
            <div class="win-label-main">ë‹¹ì²¨ ì¸ì›</div>
            <div class="win-badge">ğŸ† ë‹¹ì²¨</div>
            <div class="win-count-ctrl">
              <button class="wcbtn" id="wMinus" onclick="changeWin(-1)" aria-label="ë‹¹ì²¨ ì¸ì› ê°ì†Œ">âˆ’</button>
              <div class="wcnum" id="wNum">1</div>
              <button class="wcbtn" id="wPlus" onclick="changeWin(1)" aria-label="ë‹¹ì²¨ ì¸ì› ì¦ê°€">+</button>
            </div>
          </div>
          <div class="win-preview" id="winPreview"></div>
        </div>

        <div class="divider"></div>
        <button class="btn btn-p" onclick="startGame()">ğŸ² ì‚¬ë‹¤ë¦¬ ìƒì„±</button>
        <button class="btn btn-s" onclick="resetAll()">â†º ì´ˆê¸°í™”</button>
      </div>
    </div>
  </div>

  <!-- ì˜¤ë¥¸ìª½ -->
  <div>
    <div class="cp">
      <div class="cphead">
        <div class="cphl">
          <div class="ph-icon">ğŸªœ</div>
          <div class="cp-title">ì‚¬ë‹¤ë¦¬</div>
        </div>
        <div class="status" id="statusBadge">ëŒ€ê¸° ì¤‘</div>
      </div>
      <div class="cwrap" id="cwrap">
        <div class="empty" id="emptyState">
          <div class="empty-icon">ğŸªœ</div>
          <div style="font-size:14px;font-weight:600;">ì•„ì§ ì‚¬ë‹¤ë¦¬ê°€ ì—†ì–´ìš”</div>
          <div style="font-size:12px;text-align:center;line-height:1.8;color:var(--muted);">ì™¼ìª½ì—ì„œ ì´ë¦„ê³¼ ë‹¹ì²¨ ì¸ì›ì„ ì„¤ì •í•œ ë’¤<br>ì‚¬ë‹¤ë¦¬ ìƒì„± ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”</div>
        </div>
        <canvas id="cv" style="display:none;"></canvas>
      </div>
      <div id="ra" style="display:none;">
        <div class="ra">
          <div class="ra-lbl">ì´ë¦„ í´ë¦­ â†’ ì‚¬ë‹¤ë¦¬ ê³µê°œ</div>
          <div class="rgrid" id="rcGrid"></div>
          <div class="brow">
            <button class="bsm bsm-p" onclick="revealAll()">ì „ì²´ ê³µê°œ</button>
            <button class="bsm bsm-g" onclick="regenerate()">ë‹¤ì‹œ ìƒì„±</button>
            <button class="bsm bsm-share" id="btnShare" onclick="shareResult()" disabled>ğŸ“‹ ê²°ê³¼ ë³µì‚¬</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Usage & FAQ -->
<div class="below-grid">
  <!-- DERMEUM ë°°ë„ˆ -->
  <a href="https://dermeum.com/product/detail.html?product_no=15&cate_no=23&display_group=1" target="_blank" rel="noopener" style="display:block;margin-bottom:24px;padding:16px 20px;border-radius:14px;text-decoration:none;background:linear-gradient(135deg,#f0fdf4 0%,#ecfdf5 50%,#f0fdf9 100%);border:1px solid #bbf7d0;transition:.3s;overflow:hidden;" onmouseover="this.style.borderColor='#86efac';this.style.transform='translateY(-1px)';this.style.boxShadow='0 4px 20px rgba(16,163,74,.1)'" onmouseout="this.style.borderColor='#bbf7d0';this.style.transform='none';this.style.boxShadow='none'">
    <div style="display:flex;align-items:center;gap:12px">
      <span style="font-size:28px;flex-shrink:0">ğŸ’§</span>
      <div style="flex:1;min-width:0">
        <div style="font-size:10px;color:#16a34a;letter-spacing:1.2px;font-weight:700;margin-bottom:2px">DERMEUM</div>
        <div style="font-size:13px;font-weight:700;color:#14532d;line-height:1.4">ì‚¬ë‹¤ë¦¬ ê²°ê³¼ëŠ” ìš´, í”¼ë¶€ ìˆ˜ë¶„ì€ ì‹¤ë ¥</div>
        <div style="font-size:11px;color:#15803d;margin-top:2px;line-height:1.4;opacity:.8">10ì¢… íˆì•Œë£¨ë¡ ì‚° ì•°í”Œ Â· ì €ìê·¹ ìˆ˜ë¶„ ì¶©ì „ ğŸ’§</div>
      </div>
      <div style="flex-shrink:0;font-size:11px;font-weight:700;color:#16a34a;background:rgba(16,163,74,.1);padding:6px 14px;border-radius:8px;border:1px solid #bbf7d0;white-space:nowrap">ë³´ëŸ¬ ê°€ê¸° â†’</div>
    </div>
  </a>

  <section class="usage-section">
    <h2>ì‚¬ë‹¤ë¦¬ê²Œì„ ì‚¬ìš©ë²•</h2>
    <p class="usage-desc">
      ì°¸ì—¬ ì¸ì›ì„ 2ëª…ì—ì„œ 8ëª…ê¹Œì§€ ì„¤ì •í•˜ê³ , ê° ì°¸ì—¬ìì˜ ì´ë¦„ì„ ì…ë ¥í•©ë‹ˆë‹¤. ë‹¹ì²¨ ì¸ì›ì„ 1ëª… ì´ìƒìœ¼ë¡œ ì§€ì •í•œ ë’¤ 'ì‚¬ë‹¤ë¦¬ ìƒì„±' ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ë¬´ì‘ìœ„ ì‚¬ë‹¤ë¦¬ê°€ ìë™ìœ¼ë¡œ ë§Œë“¤ì–´ì§‘ë‹ˆë‹¤. ê²°ê³¼ ì˜ì—­ì—ì„œ ì´ë¦„ ì¹´ë“œë¥¼ í•˜ë‚˜ì”© í´ë¦­í•˜ë©´ í•´ë‹¹ ì°¸ì—¬ìì˜ ê²½ë¡œê°€ ì• ë‹ˆë©”ì´ì…˜ìœ¼ë¡œ ê³µê°œë˜ë©°, 'ì „ì²´ ê³µê°œ' ë²„íŠ¼ìœ¼ë¡œ í•œë²ˆì— ëª¨ë“  ê²°ê³¼ë¥¼ í™•ì¸í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ëª¨ë“  ê²°ê³¼ ê³µê°œ í›„ 'ê²°ê³¼ ë³µì‚¬' ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ í…ìŠ¤íŠ¸ë¡œ ì •ë¦¬ëœ ê²°ê³¼ë¥¼ í´ë¦½ë³´ë“œì— ë³µì‚¬í•˜ì—¬ ì¹´ì¹´ì˜¤í†¡ì´ë‚˜ ë©”ì‹œì§€ë¡œ ì‰½ê²Œ ê³µìœ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‚¬ë‹¤ë¦¬ëŠ” ë§¤ë²ˆ ìƒˆë¡œ ë¬´ì‘ìœ„ ìƒì„±ë˜ë©°, ì„œë²„ì— ë°ì´í„°ê°€ ì „ì†¡ë˜ì§€ ì•Šìœ¼ë¯€ë¡œ ì•ˆì‹¬í•˜ê³  ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    </p>
  </section>

  <section class="faq-section">
    <h2>ìì£¼ ë¬»ëŠ” ì§ˆë¬¸ ğŸ’¬</h2>
    <div class="faq-item">
      <div class="faq-q" onclick="toggleFaq(this)">ì‚¬ë‹¤ë¦¬ê²Œì„ì€ ì–´ë–»ê²Œ ì‚¬ìš©í•˜ë‚˜ìš”?</div>
      <div class="faq-a"><div class="faq-a-inner">ì°¸ì—¬ ì¸ì›(2~8ëª…)ì„ ì„¤ì •í•˜ê³  ì´ë¦„ì„ ì…ë ¥í•œ ë’¤, ë‹¹ì²¨ ì¸ì›ì„ ì •í•˜ê³  'ì‚¬ë‹¤ë¦¬ ìƒì„±' ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ë©ë‹ˆë‹¤. ì´ë¦„ ì¹´ë“œë¥¼ í´ë¦­í•˜ë©´ í•´ë‹¹ ì‚¬ëŒì˜ ì‚¬ë‹¤ë¦¬ ê²½ë¡œê°€ ì• ë‹ˆë©”ì´ì…˜ìœ¼ë¡œ ê³µê°œë©ë‹ˆë‹¤.</div></div>
    </div>
    <div class="faq-item">
      <div class="faq-q" onclick="toggleFaq(this)">ê²°ê³¼ê°€ ê³µì •í•œê°€ìš”?</div>
      <div class="faq-a"><div class="faq-a-inner">ë„¤. ì‚¬ë‹¤ë¦¬ ê°€ë¡œì¤„ê³¼ ë‹¹ì²¨ ë°°ì¹˜ëŠ” ëª¨ë‘ ë¸Œë¼ìš°ì €ì˜ ëœë¤ í•¨ìˆ˜(Math.random)ë¡œ ìƒì„±ë˜ë©°, ì„œë²„ì™€ í†µì‹ í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë§¤ë²ˆ ìƒˆë¡œìš´ ì‚¬ë‹¤ë¦¬ê°€ ëœë¤ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤.</div></div>
    </div>
    <div class="faq-item">
      <div class="faq-q" onclick="toggleFaq(this)">ìµœëŒ€ ëª‡ ëª…ê¹Œì§€ ì°¸ì—¬í•  ìˆ˜ ìˆë‚˜ìš”?</div>
      <div class="faq-a"><div class="faq-a-inner">ìµœì†Œ 2ëª…ë¶€í„° ìµœëŒ€ 8ëª…ê¹Œì§€ ì°¸ì—¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¹ì²¨ ì¸ì›ì€ 1ëª…ë¶€í„° (ì „ì²´ ì¸ì› - 1)ëª…ê¹Œì§€ ììœ ë¡­ê²Œ ì„¤ì • ê°€ëŠ¥í•©ë‹ˆë‹¤.</div></div>
    </div>
    <div class="faq-item">
      <div class="faq-q" onclick="toggleFaq(this)">ê²°ê³¼ë¥¼ ê³µìœ í•  ìˆ˜ ìˆë‚˜ìš”?</div>
      <div class="faq-a"><div class="faq-a-inner">ë„¤. ëª¨ë“  ê²°ê³¼ê°€ ê³µê°œëœ í›„ 'ê²°ê³¼ ë³µì‚¬' ë²„íŠ¼ì´ í™œì„±í™”ë©ë‹ˆë‹¤. í´ë¦­í•˜ë©´ ê° ì°¸ì—¬ìì˜ ë‹¹ì²¨/ê½ ê²°ê³¼ê°€ í…ìŠ¤íŠ¸ë¡œ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì–´ ì¹´ì¹´ì˜¤í†¡, ë©”ì‹œì§€ ë“±ìœ¼ë¡œ ê³µìœ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</div></div>
    </div>
    <div class="faq-item">
      <div class="faq-q" onclick="toggleFaq(this)">ëª¨ë°”ì¼ì—ì„œë„ ì‚¬ìš© ê°€ëŠ¥í•œê°€ìš”?</div>
      <div class="faq-a"><div class="faq-a-inner">ë„¤. ëª¨ë°”ì¼ ë¸Œë¼ìš°ì €ì—ì„œë„ ë™ì¼í•˜ê²Œ ì‘ë™í•©ë‹ˆë‹¤. ì‚¬ë‹¤ë¦¬ ìƒì„± í›„ ì´ë¦„ ì¹´ë“œë¥¼ íƒ­í•˜ë©´ ê²½ë¡œê°€ ì• ë‹ˆë©”ì´ì…˜ìœ¼ë¡œ ê³µê°œë©ë‹ˆë‹¤.</div></div>
    </div>
  </section>

</div>

<div class="toast" id="toast" role="alert" aria-live="polite"></div>

<script>
const MIN=2,MAX=8;
const DEF=['ì°¸ì—¬ì1','ì°¸ì—¬ì2','ì°¸ì—¬ì3','ì°¸ì—¬ì4','ì°¸ì—¬ì5','ì°¸ì—¬ì6','ì°¸ì—¬ì7','ì°¸ì—¬ì8'];
const COLORS=['#2563eb','#7c3aed','#db2777','#d97706','#059669','#dc2626','#0891b2','#65a30d'];
const WIN_COLOR='#16a34a', LOSE_COLOR='#dc2626';

let count=4, winCount=1;
let ladder=null, paths=[], revealedSet=new Set(), drawnSet=new Set();
let isRunning=false;
let names=[], resultMap=[];

// â”€â”€ ì¸ì› â”€â”€
function changeCount(d){
  count=Math.min(MAX,Math.max(MIN,count+d));
  document.getElementById('cNum').textContent=count;
  document.getElementById('bMinus').disabled=count<=MIN;
  document.getElementById('bPlus').disabled=count>=MAX;
  winCount=Math.min(winCount,count-1);
  document.getElementById('wNum').textContent=winCount;
  renderNames();
  renderWinPreview();
}

function renderNames(){
  const c=document.getElementById('nameList');
  const old=c.querySelectorAll('input');
  const saved=Array.from(old).map(i=>i.value);
  c.innerHTML='';
  for(let i=0;i<count;i++){
    const row=document.createElement('div');
    row.className='name-row';
    const val=saved[i]!==undefined?saved[i]:DEF[i];
    row.innerHTML=`<span class="name-idx">${i+1}</span>
      <input class="name-input" id="ni${i}" type="text" maxlength="8"
        value="${val}" placeholder="${DEF[i]}" aria-label="${i+1}ë²ˆ ì°¸ì—¬ì ì´ë¦„">`;
    c.appendChild(row);
  }
}

// â”€â”€ ë‹¹ì²¨ ì¸ì› â”€â”€
function changeWin(d){
  winCount=Math.min(count-1,Math.max(1,winCount+d));
  document.getElementById('wNum').textContent=winCount;
  document.getElementById('wMinus').disabled=winCount<=1;
  document.getElementById('wPlus').disabled=winCount>=count-1;
  renderWinPreview();
}

function renderWinPreview(){
  const p=document.getElementById('winPreview');
  p.innerHTML='';
  for(let i=0;i<count;i++){
    const chip=document.createElement('span');
    chip.className='win-chip '+(i<winCount?'w':'l');
    chip.textContent=i<winCount?'ğŸ† ë‹¹ì²¨':'ğŸ’€ ê½';
    p.appendChild(chip);
  }
}

// â”€â”€ ì‚¬ë‹¤ë¦¬ â”€â”€
function buildLadder(n){
  const ROWS=12+Math.floor(Math.random()*5);
  const horiz=[];
  for(let r=0;r<ROWS;r++){
    const row=[];let c=0;
    while(c<n-1){if(Math.random()<0.42){row.push(c);c+=2;}else c++;}
    horiz.push(row);
  }
  return{n,rows:ROWS,horiz};
}

function calcPaths(data){
  const{n,rows,horiz}=data;
  return Array.from({length:n},(_,start)=>{
    const path=[start];let col=start;
    for(let r=0;r<rows;r++){
      if(horiz[r].includes(col))col++;
      else if(horiz[r].includes(col-1))col--;
      path.push(col);
    }
    return path;
  });
}

function makeResultMap(n,wc){
  const arr=Array.from({length:n},(_,i)=>i<wc?'ë‹¹ì²¨':'ê½');
  for(let i=arr.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[arr[i],arr[j]]=[arr[j],arr[i]];}
  return arr;
}

// â”€â”€ ê²Œì„ ì‹œì‘ â”€â”€
function startGame(){
  names=[];
  for(let i=0;i<count;i++){
    names.push((document.getElementById(`ni${i}`)?.value||'').trim()||DEF[i]);
  }
  resultMap=makeResultMap(count,winCount);
  ladder=buildLadder(count);
  paths=calcPaths(ladder);
  revealedSet=new Set();drawnSet=new Set();isRunning=false;

  document.getElementById('emptyState').style.display='none';
  document.getElementById('cv').style.display='block';
  document.getElementById('ra').style.display='block';
  document.getElementById('btnShare').disabled=true;
  setStatus('ì´ë¦„ í´ë¦­ ì‹œ ì‚¬ë‹¤ë¦¬ ê³µê°œ','');
  drawStatic();
  renderCards();
}

// â”€â”€ ë ˆì´ì•„ì›ƒ â”€â”€
function getL(){
  const wrap=document.getElementById('cwrap');
  const W=wrap.clientWidth-32;
  const{n,rows}=ladder;
  const H=Math.max(400,rows*30+130);
  const PX=42,PY=56;
  const cg=(W-PX*2)/(n-1);
  const rg=(H-PY*2)/rows;
  return{W,H,PX,PY,cg,rg,
    cx:c=>PX+c*cg,
    ry:r=>PY+r*rg,
    my:r=>PY+r*rg+rg/2};
}

// â”€â”€ ê²©ì â”€â”€
function drawGrid(ctx,L){
  const{n,rows,horiz}=ladder;
  const{cx,ry,my,PY}=L;
  for(let c=0;c<n;c++){
    ctx.beginPath();ctx.moveTo(cx(c),PY);ctx.lineTo(cx(c),ry(rows));
    ctx.strokeStyle='#dde1e9';ctx.lineWidth=2.5;ctx.lineCap='round';ctx.stroke();
  }
  for(let r=0;r<rows;r++){
    for(const c of horiz[r]){
      ctx.beginPath();ctx.moveTo(cx(c),my(r));ctx.lineTo(cx(c+1),my(r));
      ctx.strokeStyle='#d1d5db';ctx.lineWidth=2.5;ctx.stroke();
    }
  }
}

// â”€â”€ ê²½ë¡œ ê·¸ë¦¬ê¸° â”€â”€
function drawOnePath(ctx,L,idx){
  const{cx,ry,my,PY}=L;
  const{rows}=ladder;
  const path=paths[idx];
  const col=COLORS[idx%COLORS.length];
  ctx.save();
  ctx.strokeStyle=col;ctx.lineWidth=4.5;
  ctx.lineCap='round';ctx.lineJoin='round';
  ctx.shadowColor=col;ctx.shadowBlur=10;
  ctx.beginPath();ctx.moveTo(cx(path[0]),PY);
  for(let r=0;r<rows;r++){
    const fc=path[r],tc=path[r+1];
    ctx.lineTo(cx(fc),my(r));
    if(fc!==tc)ctx.lineTo(cx(tc),my(r));
  }
  ctx.lineTo(cx(path[rows]),ry(rows));
  ctx.stroke();
  const ar=6;
  ctx.beginPath();ctx.arc(cx(path[rows]),ry(rows),ar,0,Math.PI*2);
  ctx.fillStyle=col;ctx.shadowBlur=14;ctx.fill();
  ctx.restore();
}

function drawAllPaths(ctx,L){
  for(const idx of drawnSet)drawOnePath(ctx,L,idx);
}

// â”€â”€ ë¼ë²¨ â”€â”€
function drawLabels(ctx,L){
  const{n,rows}=ladder;
  const{cx,ry,H,cg,PY}=L;
  const bw=Math.min(cg-8,72),bh=28;
  const fs=Math.min(11,cg*0.14+7);

  for(let c=0;c<n;c++){
    const x=cx(c);
    const pcolor=COLORS[c%COLORS.length];
    const active=drawnSet.has(c)||revealedSet.has(c);

    rr(ctx,x-bw/2,10,bw,bh,6);
    ctx.fillStyle=active?pcolor:'#f0f2f5';ctx.fill();
    if(!active){ctx.strokeStyle='#dde1e9';ctx.lineWidth=1.5;ctx.stroke();}
    ctx.font=`700 ${fs}px "Noto Sans KR",sans-serif`;
    ctx.fillStyle=active?'#fff':'#6b7280';
    ctx.textAlign='center';ctx.textBaseline='middle';
    ctx.fillText(clip(names[c],5),x,24);

    const dc=paths[c][rows];
    const rx=cx(dc);
    rr(ctx,rx-bw/2,H-38,bw,bh,6);
    if(revealedSet.has(c)){
      const res=resultMap[dc];
      const rc=res==='ë‹¹ì²¨'?WIN_COLOR:LOSE_COLOR;
      ctx.fillStyle=rc+'18';ctx.fill();
      ctx.strokeStyle=rc;ctx.lineWidth=1.5;ctx.stroke();
      ctx.font=`700 ${fs}px "Noto Sans KR",sans-serif`;
      ctx.fillStyle=rc;ctx.textAlign='center';ctx.textBaseline='middle';
      ctx.fillText(res,rx,H-24);
    }else{
      ctx.fillStyle='#f0f2f5';ctx.fill();
      ctx.strokeStyle='#dde1e9';ctx.lineWidth=1.5;ctx.stroke();
      ctx.font='700 12px sans-serif';ctx.fillStyle='#b0b7c3';
      ctx.textAlign='center';ctx.textBaseline='middle';
      ctx.fillText('?',rx,H-24);
    }
  }
}

function drawStatic(){
  const cv=document.getElementById('cv');
  const L=getL();
  cv.width=L.W;cv.height=L.H;
  const ctx=cv.getContext('2d');
  ctx.clearRect(0,0,L.W,L.H);
  drawGrid(ctx,L);
  drawAllPaths(ctx,L);
  drawLabels(ctx,L);
}

// â”€â”€ í‚¤í”„ë ˆì„ â”€â”€
function buildKF(idx,L){
  const{cx,ry,my,PY}=L;
  const{rows}=ladder;
  const path=paths[idx];
  const kf=[{x:cx(path[0]),y:PY}];
  for(let r=0;r<rows;r++){
    const fc=path[r],tc=path[r+1];
    kf.push({x:cx(fc),y:my(r)});
    if(fc!==tc)kf.push({x:cx(tc),y:my(r)});
  }
  kf.push({x:cx(path[rows]),y:ry(rows)});
  return kf;
}

function buildSegs(kf){
  const segs=[];let total=0;
  for(let i=0;i<kf.length-1;i++){
    const dx=kf[i+1].x-kf[i].x,dy=kf[i+1].y-kf[i].y;
    const l=Math.sqrt(dx*dx+dy*dy);
    segs.push(l);total+=l;
  }
  return{segs,total};
}

function getPosAt(kf,segs,total,p){
  const tgt=total*p;
  let acc=0;
  for(let i=0;i<segs.length;i++){
    if(acc+segs[i]>=tgt){
      const t=segs[i]>0?(tgt-acc)/segs[i]:0;
      const e=t<0.5?2*t*t:-1+(4-2*t)*t;
      return{x:kf[i].x+(kf[i+1].x-kf[i].x)*e, y:kf[i].y+(kf[i+1].y-kf[i].y)*e};
    }
    acc+=segs[i];
  }
  return kf[kf.length-1];
}

// â”€â”€ ì• ë‹ˆë©”ì´ì…˜ â”€â”€
function animatePath(idx,onDone){
  const cv=document.getElementById('cv');
  const{rows}=ladder;
  const pcolor=COLORS[idx%COLORS.length];
  const TOTAL_MS=Math.max(1300,rows*90);
  const particles=[];
  let t0=null;

  function frame(now){
    if(!t0)t0=now;
    const rawP=Math.min((now-t0)/TOTAL_MS,1);
    const gp=rawP<0.5?2*rawP*rawP:-1+(4-2*rawP)*rawP;

    const L=getL();
    const kf=buildKF(idx,L);
    const{segs,total}=buildSegs(kf);
    const pos=getPosAt(kf,segs,total,gp);

    if(Math.random()<0.38){
      particles.push({
        x:pos.x,y:pos.y,
        vx:(Math.random()-.5)*2.8,
        vy:(Math.random()-.5)*2.8,
        life:1.0,
        r:Math.random()*3.5+1.5
      });
    }
    for(let i=particles.length-1;i>=0;i--){
      particles[i].x+=particles[i].vx;
      particles[i].y+=particles[i].vy;
      particles[i].life-=0.045;
      if(particles[i].life<=0)particles.splice(i,1);
    }

    cv.width=L.W;cv.height=L.H;
    const ctx=cv.getContext('2d');
    ctx.clearRect(0,0,L.W,L.H);
    drawGrid(ctx,L);
    drawAllPaths(ctx,L);

    const tgt2=total*gp;
    let acc2=0;
    ctx.save();
    ctx.strokeStyle=pcolor;ctx.lineWidth=4.5;
    ctx.lineCap='round';ctx.lineJoin='round';
    ctx.shadowColor=pcolor;ctx.shadowBlur=11;
    ctx.beginPath();ctx.moveTo(kf[0].x,kf[0].y);
    for(let i=0;i<segs.length;i++){
      if(acc2+segs[i]>=tgt2){
        const t2=segs[i]>0?(tgt2-acc2)/segs[i]:0;
        const e2=t2<0.5?2*t2*t2:-1+(4-2*t2)*t2;
        ctx.lineTo(kf[i].x+(kf[i+1].x-kf[i].x)*e2, kf[i].y+(kf[i+1].y-kf[i].y)*e2);
        break;
      }
      acc2+=segs[i];
      ctx.lineTo(kf[i+1].x,kf[i+1].y);
    }
    ctx.stroke();
    ctx.restore();

    for(const p of particles){
      const radius=Math.max(0.01, p.r*p.life);
      ctx.beginPath();
      ctx.arc(p.x,p.y,radius,0,Math.PI*2);
      const alpha=Math.floor(Math.max(0,Math.min(255,p.life*180))).toString(16).padStart(2,'0');
      ctx.fillStyle=pcolor+alpha;
      ctx.fill();
    }

    drawDot(ctx,pos.x,pos.y,pcolor);
    drawLabels(ctx,L);

    if(rawP<1){
      requestAnimationFrame(frame);
    }else{
      revealedSet.add(idx);drawnSet.add(idx);
      drawStatic();
      updateCard(idx);
      burst(L.cx(paths[idx][rows]),L.ry(rows),pcolor,L);
      onDone();
    }
  }
  requestAnimationFrame(frame);
}

function drawDot(ctx,x,y,color){
  const g=ctx.createRadialGradient(x,y,0,x,y,18);
  g.addColorStop(0,color+'77');g.addColorStop(1,color+'00');
  ctx.beginPath();ctx.arc(x,y,18,0,Math.PI*2);ctx.fillStyle=g;ctx.fill();
  ctx.beginPath();ctx.arc(x,y,8,0,Math.PI*2);
  ctx.fillStyle='#fff';ctx.shadowColor=color;ctx.shadowBlur=0;ctx.fill();
  ctx.beginPath();ctx.arc(x,y,5.5,0,Math.PI*2);
  ctx.fillStyle=color;ctx.shadowColor=color;ctx.shadowBlur=18;ctx.fill();
  ctx.shadowBlur=0;
}

// â”€â”€ ë„ì°© í­ë°œ â”€â”€
function burst(cx2,cy2,color,L){
  const cv=document.getElementById('cv');
  const pts=Array.from({length:20},()=>({
    x:cx2,y:cy2,
    vx:(Math.random()-.5)*8,
    vy:(Math.random()-.85)*8,
    life:1.0,
    r:Math.random()*5+2,
    isRect:Math.random()>.5,
    col:Math.random()>.5?color:'#fff'
  }));
  function go(){
    const L2=getL();
    cv.width=L2.W;cv.height=L2.H;
    const ctx=cv.getContext('2d');
    ctx.clearRect(0,0,L2.W,L2.H);
    drawGrid(ctx,L2);drawAllPaths(ctx,L2);drawLabels(ctx,L2);
    let alive=false;
    for(const p of pts){
      if(p.life<=0)continue;
      alive=true;
      p.x+=p.vx;p.y+=p.vy;p.vy+=0.25;p.life-=0.038;
      const alpha=Math.floor(Math.max(0,Math.min(255,p.life*255))).toString(16).padStart(2,'0');
      ctx.save();ctx.globalAlpha=Math.max(0,p.life);
      ctx.fillStyle=p.col+alpha;
      ctx.shadowColor=p.col;ctx.shadowBlur=7;
      if(p.isRect){
        const s=Math.max(0.01,p.r*p.life);
        ctx.fillRect(p.x-s/2,p.y-s/2,s,s);
      }else{
        const r2=Math.max(0.01,p.r*p.life);
        ctx.beginPath();ctx.arc(p.x,p.y,r2,0,Math.PI*2);ctx.fill();
      }
      ctx.restore();
    }
    if(alive)requestAnimationFrame(go);
  }
  requestAnimationFrame(go);
}

// â”€â”€ ì¹´ë“œ â”€â”€
function renderCards(){
  const grid=document.getElementById('rcGrid');
  grid.innerHTML='';
  for(let i=0;i<count;i++){
    const c=COLORS[i%COLORS.length];
    grid.innerHTML+=`
      <div class="rc" id="rc${i}" onclick="revealOne(${i})" style="border-top-color:${c};" role="button" tabindex="0" aria-label="${names[i]} ì‚¬ë‹¤ë¦¬ ê³µê°œ">
        <div class="rc-name" style="color:${c};">${names[i]}</div>
        <div class="rc-result">???</div>
        <div class="rc-hint">í´ë¦­</div>
      </div>`;
  }
  // Keyboard support for cards
  grid.querySelectorAll('.rc').forEach((card, i) => {
    card.addEventListener('keydown', (e) => {
      if(e.key === 'Enter' || e.key === ' ') { e.preventDefault(); revealOne(i); }
    });
  });
}

function updateCard(idx){
  const el=document.getElementById(`rc${idx}`);
  if(!el)return;
  const dc=paths[idx][ladder.rows];
  const res=resultMap[dc];
  const isWin=res==='ë‹¹ì²¨';
  const rc=isWin?WIN_COLOR:LOSE_COLOR;
  el.classList.remove('running');el.classList.add('revealed');
  el.style.background=(isWin?WIN_COLOR:LOSE_COLOR)+'12';
  el.style.borderColor=isWin?WIN_COLOR:LOSE_COLOR;
  el.querySelector('.rc-result').textContent=isWin?'ğŸ† ë‹¹ì²¨':'ğŸ’€ ê½';
  el.querySelector('.rc-result').style.color=rc;
  el.querySelector('.rc-name').style.color=rc;
  el.setAttribute('aria-label', `${names[idx]}: ${res}`);
}

// â”€â”€ ê³µê°œ â”€â”€
function revealOne(idx){
  if(isRunning||revealedSet.has(idx))return;
  isRunning=true;
  document.getElementById(`rc${idx}`).classList.add('running');
  setStatus(`${names[idx]} ì´ë™ ì¤‘...`,'active');
  animatePath(idx,()=>{
    isRunning=false;
    if(revealedSet.size===count){
      setStatus('ì „ì²´ ê³µê°œ ì™„ë£Œ ğŸ‰','done');
      toast('ëª¨ë“  ê²°ê³¼ê°€ ê³µê°œë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ‰');
      document.getElementById('btnShare').disabled=false;
    }
    else setStatus('ì´ë¦„ í´ë¦­ ì‹œ ì‚¬ë‹¤ë¦¬ ê³µê°œ','');
  });
}

function revealAll(){
  if(isRunning)return;
  const q=[];
  for(let i=0;i<count;i++){if(!revealedSet.has(i))q.push(i);}
  if(!q.length)return;
  let qi=0;
  function next(){
    if(qi>=q.length){
      isRunning=false;
      setStatus('ì „ì²´ ê³µê°œ ì™„ë£Œ ğŸ‰','done');
      toast('ëª¨ë“  ê²°ê³¼ê°€ ê³µê°œë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ‰');
      document.getElementById('btnShare').disabled=false;
      return;
    }
    const idx=q[qi++];isRunning=true;
    document.getElementById(`rc${idx}`).classList.add('running');
    setStatus(`${names[idx]} ì´ë™ ì¤‘...`,'active');
    animatePath(idx,()=>setTimeout(next,220));
  }
  next();
}

// â”€â”€ ê²°ê³¼ ê³µìœ  â”€â”€
function shareResult(){
  if(revealedSet.size<count)return;
  const lines=['ğŸªœ ì‚¬ë‹¤ë¦¬ê²Œì„ ê²°ê³¼',''];
  for(let i=0;i<count;i++){
    const dc=paths[i][ladder.rows];
    const res=resultMap[dc];
    const icon=res==='ë‹¹ì²¨'?'ğŸ†':'ğŸ’€';
    lines.push(`${icon} ${names[i]} â†’ ${res}`);
  }
  lines.push('','webtoolbox.kr/ladder-game/');
  copyText(lines.join('\n'));
  toast('ê²°ê³¼ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤ âœ“');
}

async function copyText(text){
  try{await navigator.clipboard.writeText(text);}
  catch(e){
    const ta=document.createElement('textarea');
    ta.value=text;ta.style.position='fixed';ta.style.opacity='0';
    document.body.appendChild(ta);ta.select();document.execCommand('copy');
    document.body.removeChild(ta);
  }
}

function regenerate(){if(!isRunning)startGame();}
function resetAll(){
  if(isRunning)return;
  count=4;winCount=1;
  document.getElementById('cNum').textContent=4;
  document.getElementById('wNum').textContent=1;
  document.getElementById('bMinus').disabled=count<=MIN;
  document.getElementById('bPlus').disabled=false;
  renderNames();renderWinPreview();
  ladder=null;revealedSet=new Set();drawnSet=new Set();isRunning=false;
  document.getElementById('emptyState').style.display='flex';
  document.getElementById('cv').style.display='none';
  document.getElementById('ra').style.display='none';
  setStatus('ëŒ€ê¸° ì¤‘','');
}

function setStatus(t,type){
  const b=document.getElementById('statusBadge');
  b.textContent=t;b.className='status'+(type?' '+type:'');
}

// â”€â”€ ìœ í‹¸ â”€â”€
function rr(ctx,x,y,w,h,r){
  ctx.beginPath();ctx.moveTo(x+r,y);
  ctx.lineTo(x+w-r,y);ctx.quadraticCurveTo(x+w,y,x+w,y+r);
  ctx.lineTo(x+w,y+h-r);ctx.quadraticCurveTo(x+w,y+h,x+w-r,y+h);
  ctx.lineTo(x+r,y+h);ctx.quadraticCurveTo(x,y+h,x,y+h-r);
  ctx.lineTo(x,y+r);ctx.quadraticCurveTo(x,y,x+r,y);ctx.closePath();
}
function clip(s,n){return s.length>n?s.slice(0,n)+'â€¦':s;}
let tTimer;
function toast(msg){
  const t=document.getElementById('toast');
  t.textContent=msg;t.classList.add('show');
  clearTimeout(tTimer);tTimer=setTimeout(()=>t.classList.remove('show'),2800);
}
function toggleFaq(el){el.parentElement.classList.toggle('open');}

// â”€â”€ ë¦¬ì‚¬ì´ì¦ˆ ëŒ€ì‘ â”€â”€
let resizeTimer=null;
window.addEventListener('resize',()=>{
  if(!ladder||isRunning)return;
  clearTimeout(resizeTimer);
  resizeTimer=setTimeout(()=>drawStatic(),150);
});

// â”€â”€ ì´ˆê¸° â”€â”€
renderNames();renderWinPreview();
document.getElementById('bMinus').disabled=count<=MIN;
</script>

<footer style="text-align:center;padding:24px 0;margin-top:12px;border-top:1px solid #e4e6eb;color:#9aa0a8;font-size:12px;">Â© 2025 íˆ´íˆ´ë²„ìŠ¤</footer>

</body>
</html>
