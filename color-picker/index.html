<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>HTML ìƒ‰ìƒ ì½”ë“œ ë³€í™˜ê¸° â€“ ë¬´ë£Œ ì˜¨ë¼ì¸ Color Picker | HEX, RGB, HSL, CMYK</title>
<meta name="description" content="HEX, RGB, RGBA, HSL, HSLA, CMYKê¹Œì§€ ëª¨ë“  ìƒ‰ìƒ ì½”ë“œë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ë³€í™˜í•˜ì„¸ìš”. ìƒ‰ìƒ ì½”ë“œë¥¼ ì…ë ¥í•˜ë©´ ë°”ë¡œ ìƒ‰ìƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.">
<meta name="keywords" content="ìƒ‰ìƒ í”¼ì»¤, ì»¬ëŸ¬ ì½”ë“œ, HEX ë³€í™˜, RGB ë³€í™˜, HSL, CMYK, ìƒ‰ìƒí‘œ, color picker">
<meta property="og:title" content="HTML ìƒ‰ìƒ ì½”ë“œ ë³€í™˜ê¸° â€“ ë¬´ë£Œ ì˜¨ë¼ì¸ Color Picker">
<meta property="og:description" content="HEX, RGB, RGBA, HSL, CMYK ìƒ‰ìƒ ì½”ë“œë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ë³€í™˜í•˜ì„¸ìš”.">
<link rel="canonical" href="https://webtoolbox.kr/color-picker/">
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600&family=Outfit:wght@400;500;600;700&family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
<style>
  *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

  :root {
    --bg: #f6f7f9;
    --surface: #ffffff;
    --surface-2: #f0f1f4;
    --border: #e4e6eb;
    --text: #1a1c20;
    --text-sub: #5f6368;
    --text-muted: #9aa0a8;
    --accent: #2563eb;
    --accent-hover: #1d4ed8;
    --accent-light: #eff4ff;
    --shadow-sm: 0 1px 3px rgba(0,0,0,0.04), 0 1px 2px rgba(0,0,0,0.06);
    --radius: 14px;
    --radius-sm: 10px;
  }

  body {
    font-family: 'Noto Sans KR', sans-serif;
    background: var(--bg);
    color: var(--text);
    line-height: 1.6;
    -webkit-font-smoothing: antialiased;
  }

  .nav {
    background: rgba(255,255,255,0.92);
    border-bottom: 1px solid var(--border);
    position: sticky;
    top: 0;
    z-index: 100;
    backdrop-filter: blur(12px);
  }

  .nav-inner {
    max-width: 960px;
    margin: 0 auto;
    padding: 0 24px;
    height: 60px;
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .nav-logo {
    display: flex;
    align-items: center;
    gap: 10px;
    text-decoration: none;
    color: var(--text);
  }

  .nav-logo-icon {
    width: 34px;
    height: 34px;
    background: var(--accent);
    border-radius: 9px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #fff;
    font-weight: 700;
    font-family: 'Outfit', sans-serif;
    font-size: 16px;
  }

  .nav-logo-text { font-family: 'Outfit', sans-serif; font-weight: 700; font-size: 18px; }
  .nav-sep { color: var(--border); font-size: 20px; font-weight: 300; }
  .nav-page { font-size: 14px; color: var(--text-sub); font-weight: 500; }

  .container { max-width: 960px; margin: 0 auto; padding: 40px 24px 80px; }

  .page-header { text-align: center; margin-bottom: 32px; }
  .page-header h1 {
    font-family: 'Outfit', sans-serif;
    font-size: 32px;
    font-weight: 700;
    letter-spacing: -0.5px;
    margin-bottom: 10px;
  }
  .page-header p { font-size: 15px; color: var(--text-sub); max-width: 560px; margin: 0 auto; }

  .ad-slot { margin: 24px 0; }
  .ad-banner {
    background: var(--surface);
    border: 1px dashed var(--border);
    border-radius: var(--radius-sm);
    min-height: 90px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-muted);
    font-size: 13px;
  }

  .picker-layout {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    margin-bottom: 24px;
  }

  @media (max-width: 680px) {
    .picker-layout { grid-template-columns: 1fr; }
    .page-header h1 { font-size: 24px; }
  }

  .card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 24px;
    box-shadow: var(--shadow-sm);
  }

  .color-canvas-wrap {
    position: relative;
    width: 100%;
    aspect-ratio: 1;
    border-radius: 8px;
    overflow: hidden;
    cursor: crosshair;
    margin-bottom: 16px;
  }

  #colorCanvas { width: 100%; height: 100%; display: block; }

  .canvas-cursor {
    position: absolute;
    width: 18px;
    height: 18px;
    border: 2px solid #fff;
    border-radius: 50%;
    box-shadow: 0 0 4px rgba(0,0,0,0.5), inset 0 0 2px rgba(0,0,0,0.3);
    pointer-events: none;
    transform: translate(-50%, -50%);
  }

  .slider-track {
    position: relative;
    width: 100%;
    height: 20px;
    border-radius: 10px;
    cursor: pointer;
    margin-bottom: 12px;
  }

  #hueSlider {
    background: linear-gradient(to right,
      hsl(0,100%,50%), hsl(30,100%,50%), hsl(60,100%,50%),
      hsl(90,100%,50%), hsl(120,100%,50%), hsl(150,100%,50%),
      hsl(180,100%,50%), hsl(210,100%,50%), hsl(240,100%,50%),
      hsl(270,100%,50%), hsl(300,100%,50%), hsl(330,100%,50%),
      hsl(360,100%,50%)
    );
  }

  #alphaSlider {
    background: repeating-conic-gradient(#ccc 0% 25%, #fff 0% 50%) 50%/12px 12px;
    overflow: hidden;
  }

  #alphaSliderOverlay {
    position: absolute; inset: 0; border-radius: 10px; pointer-events: none;
  }

  .slider-thumb {
    position: absolute;
    width: 8px;
    height: 26px;
    top: -3px;
    background: #fff;
    border-radius: 4px;
    box-shadow: 0 1px 4px rgba(0,0,0,0.4);
    pointer-events: none;
    transform: translateX(-50%);
  }

  .slider-label { font-size: 12px; color: var(--text-muted); margin-bottom: 6px; font-weight: 500; }

  .preview-area { display: flex; gap: 12px; align-items: center; margin-bottom: 16px; }

  .color-preview-box {
    width: 56px;
    height: 56px;
    border-radius: 12px;
    border: 1px solid var(--border);
    flex-shrink: 0;
    background: repeating-conic-gradient(#ccc 0% 25%, #fff 0% 50%) 50%/10px 10px;
    overflow: hidden;
  }

  .color-preview-inner { width: 100%; height: 100%; }
  .preview-text .label { font-size: 12px; color: var(--text-muted); margin-bottom: 2px; }
  .preview-text .value { font-family: 'JetBrains Mono', monospace; font-size: 20px; font-weight: 600; }

  /* Code section - editable inputs */
  .code-section h3 {
    font-size: 13px;
    font-weight: 600;
    color: var(--text-muted);
    margin-bottom: 12px;
    text-transform: uppercase;
    letter-spacing: 1px;
  }

  .code-row {
    display: flex;
    align-items: center;
    padding: 8px 12px;
    background: var(--surface-2);
    border-radius: 8px;
    margin-bottom: 6px;
    border: 1px solid transparent;
    transition: border-color 0.2s;
  }

  .code-row:focus-within { border-color: var(--accent); }
  .code-row:hover { border-color: var(--border); }

  .code-row .format-label {
    font-size: 12px;
    color: var(--text-muted);
    font-weight: 600;
    min-width: 50px;
    flex-shrink: 0;
  }

  .code-input {
    font-family: 'JetBrains Mono', monospace;
    font-size: 13px;
    color: var(--text);
    flex: 1;
    text-align: right;
    background: none;
    border: none;
    outline: none;
    padding: 4px 0;
    margin: 0 8px;
    min-width: 0;
  }

  .code-input::placeholder { color: var(--text-muted); opacity: 0.5; }

  .copy-btn {
    background: none;
    border: 1px solid var(--border);
    color: var(--text-muted);
    padding: 4px 10px;
    border-radius: 6px;
    cursor: pointer;
    font-size: 12px;
    font-family: 'Noto Sans KR', sans-serif;
    transition: all 0.2s;
    white-space: nowrap;
    flex-shrink: 0;
  }

  .copy-btn:hover { border-color: var(--accent); color: var(--accent); }
  .copy-btn.copied { border-color: #16a34a; color: #16a34a; }

  .input-hint {
    font-size: 11px;
    color: var(--text-muted);
    margin-top: 8px;
    text-align: center;
    padding: 6px;
    background: var(--accent-light);
    border-radius: 6px;
    color: var(--accent);
  }

  /* Named Colors */
  .named-colors-section { margin-top: 24px; }
  .named-colors-section h2 { font-size: 18px; font-weight: 700; margin-bottom: 6px; }
  .named-colors-section > p { color: var(--text-sub); font-size: 14px; margin-bottom: 16px; }

  .color-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
    gap: 8px;
  }

  .color-swatch {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 10px;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s;
  }

  .color-swatch:hover { border-color: var(--accent); transform: translateY(-1px); }

  .swatch-circle {
    width: 24px; height: 24px; border-radius: 6px; flex-shrink: 0;
    border: 1px solid rgba(0,0,0,0.08);
  }

  .swatch-name { font-weight: 500; font-size: 11px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
  .swatch-hex { font-family: 'JetBrains Mono', monospace; color: var(--text-muted); font-size: 10px; }

  .toast {
    position: fixed;
    bottom: 30px;
    left: 50%;
    transform: translateX(-50%) translateY(100px);
    background: var(--accent);
    color: #fff;
    padding: 10px 24px;
    border-radius: 8px;
    font-size: 14px;
    font-weight: 500;
    box-shadow: 0 4px 20px rgba(37,99,235,0.3);
    transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    z-index: 1000;
    pointer-events: none;
  }

  .toast.show { transform: translateX(-50%) translateY(0); }

  .faq-section { margin-top: 48px; }
  .faq-section h2 { font-size: 20px; font-weight: 700; margin-bottom: 20px; }

  .faq-item {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--radius-sm);
    margin-bottom: 10px;
    overflow: hidden;
  }

  .faq-q {
    padding: 16px 20px;
    font-weight: 500;
    font-size: 15px;
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .faq-q::after { content: '+'; font-size: 20px; color: var(--text-muted); transition: transform 0.2s; }
  .faq-item.open .faq-q::after { transform: rotate(45deg); }

  .faq-a { max-height: 0; overflow: hidden; transition: max-height 0.3s ease; }
  .faq-a-inner { padding: 0 20px 16px; color: var(--text-sub); font-size: 14px; line-height: 1.8; }
  .faq-item.open .faq-a { max-height: 300px; }
</style>
</head>
<body>

<nav class="nav">
  <div class="nav-inner">
    <a href="/" class="nav-logo">
      <div class="nav-logo-icon">U</div>
      <span class="nav-logo-text">Utility</span>
    </a>
    <span class="nav-sep">/</span>
    <span class="nav-page">ìƒ‰ìƒ ì½”ë“œ ë³€í™˜ê¸°</span>
  </div>
</nav>

<div class="container">

  <div class="page-header">
    <h1>HTML ìƒ‰ìƒ ì½”ë“œ ë³€í™˜ê¸°</h1>
    <p>ìƒ‰ìƒì„ ì„ íƒí•˜ê±°ë‚˜, ì•„ë¬´ ìƒ‰ìƒ ì½”ë“œë¥¼ ì§ì ‘ ì…ë ¥í•˜ë©´ ëª¨ë“  í¬ë§·ìœ¼ë¡œ ì‹¤ì‹œê°„ ë³€í™˜ë©ë‹ˆë‹¤</p>
  </div>

  <!-- Ad: Top -->
  <div class="ad-slot">
    <div class="ad-banner">ê´‘ê³  ì˜ì—­</div>
  </div>

  <div class="picker-layout">
    <!-- Left: Picker -->
    <div class="card">
      <div class="color-canvas-wrap" id="canvasWrap">
        <canvas id="colorCanvas"></canvas>
        <div class="canvas-cursor" id="canvasCursor"></div>
      </div>

      <div class="slider-label">ìƒ‰ìƒ (Hue)</div>
      <div class="slider-track" id="hueSlider">
        <div class="slider-thumb" id="hueThumb"></div>
      </div>

      <div class="slider-label" style="margin-top:4px">íˆ¬ëª…ë„ (Alpha)</div>
      <div class="slider-track" id="alphaSlider">
        <div id="alphaSliderOverlay"></div>
        <div class="slider-thumb" id="alphaThumb" style="left:100%"></div>
      </div>

      <div class="preview-area" style="margin-top:16px">
        <div class="color-preview-box">
          <div class="color-preview-inner" id="previewBox"></div>
        </div>
        <div class="preview-text">
          <div class="label">ì„ íƒëœ ìƒ‰ìƒ</div>
          <div class="value" id="previewHex">#2563EB</div>
        </div>
      </div>
    </div>

    <!-- Right: Editable Values -->
    <div class="card">
      <div class="code-section">
        <h3>ìƒ‰ìƒ ì½”ë“œ (ì§ì ‘ ì…ë ¥ ê°€ëŠ¥)</h3>

        <div class="code-row">
          <span class="format-label">HEX</span>
          <input class="code-input" id="valHex" value="#2563EB" data-format="hex" spellcheck="false">
          <button class="copy-btn" onclick="copyFrom('valHex',this)">ë³µì‚¬</button>
        </div>

        <div class="code-row">
          <span class="format-label">HEX8</span>
          <input class="code-input" id="valHex8" value="#2563EBFF" data-format="hex8" spellcheck="false">
          <button class="copy-btn" onclick="copyFrom('valHex8',this)">ë³µì‚¬</button>
        </div>

        <div class="code-row">
          <span class="format-label">RGB</span>
          <input class="code-input" id="valRgb" value="rgb(37, 99, 235)" data-format="rgb" spellcheck="false">
          <button class="copy-btn" onclick="copyFrom('valRgb',this)">ë³µì‚¬</button>
        </div>

        <div class="code-row">
          <span class="format-label">RGBA</span>
          <input class="code-input" id="valRgba" value="rgba(37, 99, 235, 1)" data-format="rgba" spellcheck="false">
          <button class="copy-btn" onclick="copyFrom('valRgba',this)">ë³µì‚¬</button>
        </div>

        <div class="code-row">
          <span class="format-label">HSL</span>
          <input class="code-input" id="valHsl" value="hsl(220, 83%, 53%)" data-format="hsl" spellcheck="false">
          <button class="copy-btn" onclick="copyFrom('valHsl',this)">ë³µì‚¬</button>
        </div>

        <div class="code-row">
          <span class="format-label">HSLA</span>
          <input class="code-input" id="valHsla" value="hsla(220, 83%, 53%, 1)" data-format="hsla" spellcheck="false">
          <button class="copy-btn" onclick="copyFrom('valHsla',this)">ë³µì‚¬</button>
        </div>

        <div class="code-row">
          <span class="format-label">CMYK</span>
          <input class="code-input" id="valCmyk" value="cmyk(84%, 58%, 0%, 8%)" data-format="cmyk" spellcheck="false">
          <button class="copy-btn" onclick="copyFrom('valCmyk',this)">ë³µì‚¬</button>
        </div>

        <div class="code-row">
          <span class="format-label">HSV</span>
          <input class="code-input" id="valHsv" value="hsv(220, 84%, 92%)" data-format="hsv" spellcheck="false">
          <button class="copy-btn" onclick="copyFrom('valHsv',this)">ë³µì‚¬</button>
        </div>

        <div class="input-hint">ğŸ’¡ ì•„ë¬´ í•„ë“œì— ìƒ‰ìƒ ì½”ë“œë¥¼ ì…ë ¥í•˜ë©´ ìë™ìœ¼ë¡œ ë³€í™˜ë©ë‹ˆë‹¤</div>
      </div>
    </div>
  </div>

  <!-- Ad: Middle -->
  <div class="ad-slot">
    <div class="ad-banner">ê´‘ê³  ì˜ì—­</div>
  </div>

  <!-- Named Colors -->
  <div class="named-colors-section card">
    <h2>HTML ê¸°ë³¸ ìƒ‰ìƒí‘œ</h2>
    <p>í´ë¦­í•˜ë©´ í•´ë‹¹ ìƒ‰ìƒì´ ì„ íƒë©ë‹ˆë‹¤</p>
    <div class="color-grid" id="namedColors"></div>
  </div>

  <!-- Ad: Bottom -->
  <div class="ad-slot">
    <div class="ad-banner">ê´‘ê³  ì˜ì—­</div>
  </div>

  <!-- FAQ -->
  <div class="faq-section">
    <h2>ìì£¼ ë¬»ëŠ” ì§ˆë¬¸ (FAQ)</h2>

    <div class="faq-item">
      <div class="faq-q" onclick="toggleFaq(this)">ìƒ‰ìƒ ì½”ë“œë¥¼ ì§ì ‘ ì…ë ¥í•  ìˆ˜ ìˆë‚˜ìš”?</div>
      <div class="faq-a"><div class="faq-a-inner">
        ë„¤, ëª¨ë“  ì…ë ¥ í•„ë“œì—ì„œ ì§ì ‘ ìƒ‰ìƒ ì½”ë“œë¥¼ ì…ë ¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ RGB í•„ë“œì— rgb(255, 0, 0)ì„ ì…ë ¥í•˜ë©´ ë¹¨ê°„ìƒ‰ìœ¼ë¡œ ë³€í™˜ë˜ê³ , HEX í•„ë“œì— #FF0000ì„ ì…ë ¥í•´ë„ ë™ì¼í•©ë‹ˆë‹¤. HSL, CMYK, HSV ë“± ì–´ë–¤ í¬ë§·ì´ë“  ì…ë ¥í•˜ë©´ ë‚˜ë¨¸ì§€ í¬ë§·ì´ ìë™ìœ¼ë¡œ ë³€í™˜ë©ë‹ˆë‹¤.
      </div></div>
    </div>

    <div class="faq-item">
      <div class="faq-q" onclick="toggleFaq(this)">HEX ìƒ‰ìƒ ì½”ë“œë€ ë¬´ì—‡ì¸ê°€ìš”?</div>
      <div class="faq-a"><div class="faq-a-inner">
        HEX ì½”ë“œëŠ” # ê¸°í˜¸ì™€ 6ìë¦¬ 16ì§„ìˆ˜ë¡œ ìƒ‰ìƒì„ í‘œí˜„í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ #FF0000ì€ ë¹¨ê°•, #00FF00ì€ ì´ˆë¡, #0000FFëŠ” íŒŒë‘ì…ë‹ˆë‹¤. ì• ë‘ ìë¦¬ëŠ” Red, ì¤‘ê°„ ë‘ ìë¦¬ëŠ” Green, ë§ˆì§€ë§‰ ë‘ ìë¦¬ëŠ” Blue ê°’ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.
      </div></div>
    </div>

    <div class="faq-item">
      <div class="faq-q" onclick="toggleFaq(this)">RGBì™€ RGBAì˜ ì°¨ì´ì ì€ ë¬´ì—‡ì¸ê°€ìš”?</div>
      <div class="faq-a"><div class="faq-a-inner">
        RGBëŠ” Red, Green, Blue ì„¸ ê°€ì§€ ê°’(0~255)ìœ¼ë¡œ ìƒ‰ìƒì„ í‘œí˜„í•©ë‹ˆë‹¤. RGBAëŠ” ì—¬ê¸°ì— Alpha(íˆ¬ëª…ë„, 0~1) ê°’ì´ ì¶”ê°€ëœ ê²ƒì…ë‹ˆë‹¤. Alphaê°€ 1ì´ë©´ ë¶ˆíˆ¬ëª…, 0ì´ë©´ ì™„ì „ íˆ¬ëª…ì…ë‹ˆë‹¤.
      </div></div>
    </div>

    <div class="faq-item">
      <div class="faq-q" onclick="toggleFaq(this)">CMYKëŠ” ì–¸ì œ ì‚¬ìš©í•˜ë‚˜ìš”?</div>
      <div class="faq-a"><div class="faq-a-inner">
        CMYK(Cyan, Magenta, Yellow, Key/Black)ëŠ” ì¸ì‡„ë¬¼ì—ì„œ ì‚¬ìš©í•˜ëŠ” ìƒ‰ìƒ ëª¨ë¸ì…ë‹ˆë‹¤. ëª¨ë‹ˆí„°ëŠ” ë¹›ì„ ì„ì–´ ìƒ‰ì„ ë§Œë“¤ì§€ë§Œ(RGB), í”„ë¦°í„°ëŠ” ì‰í¬ë¥¼ ì„ì–´ ìƒ‰ì„ ë§Œë“¤ê¸° ë•Œë¬¸ì— ì¸ì‡„ìš© ë””ìì¸ì—ì„œëŠ” CMYKë¡œ ë³€í™˜í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.
      </div></div>
    </div>

    <div class="faq-item">
      <div class="faq-q" onclick="toggleFaq(this)">HSLê³¼ HSVì˜ ì°¨ì´ëŠ” ë¬´ì—‡ì¸ê°€ìš”?</div>
      <div class="faq-a"><div class="faq-a-inner">
        HSLì€ Hue(ìƒ‰ìƒ), Saturation(ì±„ë„), Lightness(ë°ê¸°)ë¡œ, HSVëŠ” Hue(ìƒ‰ìƒ), Saturation(ì±„ë„), Value(ëª…ë„)ë¡œ ìƒ‰ìƒì„ í‘œí˜„í•©ë‹ˆë‹¤. HSLì—ì„œ Lightness 50%ê°€ ê°€ì¥ ìˆœìˆ˜í•œ ìƒ‰ìƒì´ê³ , HSVì—ì„œ Value 100%ê°€ ê°€ì¥ ë°ì€ ìƒ‰ìƒì…ë‹ˆë‹¤.
      </div></div>
    </div>
  </div>

</div>

<div class="toast" id="toast">ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!</div>

<script>
const canvas = document.getElementById('colorCanvas');
const ctx = canvas.getContext('2d');
const canvasWrap = document.getElementById('canvasWrap');
const cursorEl = document.getElementById('canvasCursor');
const hueSlider = document.getElementById('hueSlider');
const hueThumb = document.getElementById('hueThumb');
const alphaSliderEl = document.getElementById('alphaSlider');
const alphaSliderOverlay = document.getElementById('alphaSliderOverlay');
const alphaThumbEl = document.getElementById('alphaThumb');
const previewBox = document.getElementById('previewBox');
const previewHex = document.getElementById('previewHex');

let hue = 220, saturation = 0.84, value = 0.92, alpha = 1;
let draggingCanvas = false, draggingHue = false, draggingAlpha = false;
let updatingFromInput = false; // prevent infinite loops

function initCanvas() {
  const rect = canvasWrap.getBoundingClientRect();
  canvas.width = rect.width; canvas.height = rect.height;
  drawCanvas();
}

function drawCanvas() {
  const w = canvas.width, h = canvas.height;
  ctx.clearRect(0, 0, w, h);
  ctx.fillStyle = `hsl(${hue}, 100%, 50%)`;
  ctx.fillRect(0, 0, w, h);
  const wg = ctx.createLinearGradient(0, 0, w, 0);
  wg.addColorStop(0, 'rgba(255,255,255,1)'); wg.addColorStop(1, 'rgba(255,255,255,0)');
  ctx.fillStyle = wg; ctx.fillRect(0, 0, w, h);
  const bg = ctx.createLinearGradient(0, 0, 0, h);
  bg.addColorStop(0, 'rgba(0,0,0,0)'); bg.addColorStop(1, 'rgba(0,0,0,1)');
  ctx.fillStyle = bg; ctx.fillRect(0, 0, w, h);
}

// --- Color math ---
function hsvToRgb(h, s, v) {
  h /= 360;
  let r, g, b;
  const i = Math.floor(h * 6), f = h * 6 - i;
  const p = v * (1 - s), q = v * (1 - f * s), t = v * (1 - (1 - f) * s);
  switch (i % 6) {
    case 0:r=v;g=t;b=p;break;case 1:r=q;g=v;b=p;break;
    case 2:r=p;g=v;b=t;break;case 3:r=p;g=q;b=v;break;
    case 4:r=t;g=p;b=v;break;case 5:r=v;g=p;b=q;break;
  }
  return [Math.round(r*255), Math.round(g*255), Math.round(b*255)];
}

function rgbToHsv(r, g, b) {
  r/=255;g/=255;b/=255;
  const max=Math.max(r,g,b), min=Math.min(r,g,b), d=max-min;
  let h, s=max===0?0:d/max, v=max;
  if(max===min) h=0;
  else { switch(max){ case r:h=(g-b)/d+(g<b?6:0);break;case g:h=(b-r)/d+2;break;case b:h=(r-g)/d+4;break; } h/=6; }
  return [Math.round(h*360), s, v];
}

function rgbToHsl(r, g, b) {
  r/=255;g/=255;b/=255;
  const max=Math.max(r,g,b), min=Math.min(r,g,b);
  let h, s, l=(max+min)/2;
  if(max===min){ h=s=0; } else {
    const d=max-min;
    s=l>0.5?d/(2-max-min):d/(max+min);
    switch(max){ case r:h=((g-b)/d+(g<b?6:0))/6;break;case g:h=((b-r)/d+2)/6;break;case b:h=((r-g)/d+4)/6;break; }
  }
  return [Math.round(h*360), Math.round(s*100), Math.round(l*100)];
}

function hslToRgb(h, s, l) {
  h/=360; s/=100; l/=100;
  let r, g, b;
  if(s===0){ r=g=b=l; } else {
    const hue2rgb = (p, q, t) => { if(t<0)t+=1; if(t>1)t-=1; if(t<1/6)return p+(q-p)*6*t; if(t<1/2)return q; if(t<2/3)return p+(q-p)*(2/3-t)*6; return p; };
    const qq = l<0.5 ? l*(1+s) : l+s-l*s;
    const pp = 2*l-qq;
    r=hue2rgb(pp,qq,h+1/3); g=hue2rgb(pp,qq,h); b=hue2rgb(pp,qq,h-1/3);
  }
  return [Math.round(r*255), Math.round(g*255), Math.round(b*255)];
}

function rgbToCmyk(r, g, b) {
  if(r===0&&g===0&&b===0) return [0,0,0,100];
  const c1=1-r/255, m1=1-g/255, y1=1-b/255;
  const k=Math.min(c1,m1,y1);
  return [Math.round((c1-k)/(1-k)*100), Math.round((m1-k)/(1-k)*100), Math.round((y1-k)/(1-k)*100), Math.round(k*100)];
}

function cmykToRgb(c, m, y, k) {
  c/=100; m/=100; y/=100; k/=100;
  return [Math.round(255*(1-c)*(1-k)), Math.round(255*(1-m)*(1-k)), Math.round(255*(1-y)*(1-k))];
}

function rgbToHex(r, g, b) { return '#'+[r,g,b].map(x=>x.toString(16).padStart(2,'0')).join('').toUpperCase(); }
function alphaToHex(a) { return Math.round(a*255).toString(16).padStart(2,'0').toUpperCase(); }

function hexToRgb(hex) {
  hex=hex.replace('#','');
  if(hex.length===3) hex=hex.split('').map(c=>c+c).join('');
  if(hex.length===8) return [parseInt(hex.substr(0,2),16),parseInt(hex.substr(2,2),16),parseInt(hex.substr(4,2),16),parseInt(hex.substr(6,2),16)/255];
  if(hex.length===6) return [parseInt(hex.substr(0,2),16),parseInt(hex.substr(2,2),16),parseInt(hex.substr(4,2),16),1];
  return null;
}

// --- Parse any format ---
function parseColorInput(format, val) {
  val = val.trim();
  try {
    if (format === 'hex') {
      if (!val.startsWith('#')) val = '#' + val;
      const p = hexToRgb(val);
      if (p) return { r: p[0], g: p[1], b: p[2], a: 1 };
    }
    if (format === 'hex8') {
      if (!val.startsWith('#')) val = '#' + val;
      const p = hexToRgb(val);
      if (p) return { r: p[0], g: p[1], b: p[2], a: p[3] };
    }
    if (format === 'rgb') {
      const m = val.match(/rgba?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)/);
      if (m) return { r: +m[1], g: +m[2], b: +m[3], a: 1 };
    }
    if (format === 'rgba') {
      const m = val.match(/rgba?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)/);
      if (m) return { r: +m[1], g: +m[2], b: +m[3], a: +m[4] };
    }
    if (format === 'hsl') {
      const m = val.match(/hsla?\s*\(\s*(\d+)\s*,\s*(\d+)%?\s*,\s*(\d+)%?/);
      if (m) { const [r,g,b] = hslToRgb(+m[1], +m[2], +m[3]); return { r, g, b, a: 1 }; }
    }
    if (format === 'hsla') {
      const m = val.match(/hsla?\s*\(\s*(\d+)\s*,\s*(\d+)%?\s*,\s*(\d+)%?\s*,\s*([\d.]+)/);
      if (m) { const [r,g,b] = hslToRgb(+m[1], +m[2], +m[3]); return { r, g, b, a: +m[4] }; }
    }
    if (format === 'cmyk') {
      const m = val.match(/cmyk\s*\(\s*(\d+)%?\s*,\s*(\d+)%?\s*,\s*(\d+)%?\s*,\s*(\d+)%?/);
      if (m) { const [r,g,b] = cmykToRgb(+m[1], +m[2], +m[3], +m[4]); return { r, g, b, a: 1 }; }
    }
    if (format === 'hsv') {
      const m = val.match(/hsv\s*\(\s*(\d+)\s*,\s*(\d+)%?\s*,\s*(\d+)%?/);
      if (m) { const [r,g,b] = hsvToRgb(+m[1], +m[2]/100, +m[3]/100); return { r, g, b, a: 1 }; }
    }
  } catch(e) {}
  return null;
}

// --- Update display from HSV state ---
function updateDisplay(skipInputId) {
  const [r, g, b] = hsvToRgb(hue, saturation, value);
  const hex = rgbToHex(r, g, b);
  const [hh, ss, ll] = rgbToHsl(r, g, b);
  const [c, m, y, k] = rgbToCmyk(r, g, b);
  const a = Math.round(alpha * 100) / 100;

  previewBox.style.background = `rgba(${r},${g},${b},${a})`;
  previewHex.textContent = hex;

  const values = {
    valHex: hex,
    valHex8: hex + alphaToHex(a),
    valRgb: `rgb(${r}, ${g}, ${b})`,
    valRgba: `rgba(${r}, ${g}, ${b}, ${a})`,
    valHsl: `hsl(${hh}, ${ss}%, ${ll}%)`,
    valHsla: `hsla(${hh}, ${ss}%, ${ll}%, ${a})`,
    valCmyk: `cmyk(${c}%, ${m}%, ${y}%, ${k}%)`,
    valHsv: `hsv(${hue}, ${Math.round(saturation*100)}%, ${Math.round(value*100)}%)`
  };

  Object.keys(values).forEach(id => {
    if (id !== skipInputId) {
      document.getElementById(id).value = values[id];
    }
  });

  alphaSliderOverlay.style.background = `linear-gradient(to right, rgba(${r},${g},${b},0), rgba(${r},${g},${b},1))`;
  cursorEl.style.left = (saturation * 100) + '%';
  cursorEl.style.top = ((1 - value) * 100) + '%';
  hueThumb.style.left = (hue / 360 * 100) + '%';
  alphaThumbEl.style.left = (alpha * 100) + '%';
}

// --- Input event listeners ---
document.querySelectorAll('.code-input').forEach(input => {
  input.addEventListener('input', function() {
    if (updatingFromInput) return;
    updatingFromInput = true;

    const format = this.dataset.format;
    const parsed = parseColorInput(format, this.value);

    if (parsed) {
      const [h, s, v] = rgbToHsv(parsed.r, parsed.g, parsed.b);
      hue = h; saturation = s; value = v;
      if (parsed.a !== undefined) alpha = parsed.a;
      drawCanvas();
      updateDisplay(this.id);
    }

    updatingFromInput = false;
  });

  // Select all on focus
  input.addEventListener('focus', function() { this.select(); });
});

// --- Canvas / slider interactions ---
function handleCanvasMove(e) {
  const rect = canvasWrap.getBoundingClientRect();
  const cx = e.touches ? e.touches[0].clientX : e.clientX;
  const cy = e.touches ? e.touches[0].clientY : e.clientY;
  saturation = Math.max(0, Math.min(1, (cx - rect.left) / rect.width));
  value = 1 - Math.max(0, Math.min(1, (cy - rect.top) / rect.height));
  updateDisplay();
}

canvasWrap.addEventListener('mousedown', e => { draggingCanvas = true; handleCanvasMove(e); });
canvasWrap.addEventListener('touchstart', e => { draggingCanvas = true; handleCanvasMove(e); e.preventDefault(); }, { passive: false });

function handleHueMove(e) {
  const rect = hueSlider.getBoundingClientRect();
  const cx = e.touches ? e.touches[0].clientX : e.clientX;
  hue = Math.max(0, Math.min(360, (cx - rect.left) / rect.width * 360));
  drawCanvas(); updateDisplay();
}

hueSlider.addEventListener('mousedown', e => { draggingHue = true; handleHueMove(e); });
hueSlider.addEventListener('touchstart', e => { draggingHue = true; handleHueMove(e); e.preventDefault(); }, { passive: false });

function handleAlphaMove(e) {
  const rect = alphaSliderEl.getBoundingClientRect();
  const cx = e.touches ? e.touches[0].clientX : e.clientX;
  alpha = Math.max(0, Math.min(1, (cx - rect.left) / rect.width));
  updateDisplay();
}

alphaSliderEl.addEventListener('mousedown', e => { draggingAlpha = true; handleAlphaMove(e); });
alphaSliderEl.addEventListener('touchstart', e => { draggingAlpha = true; handleAlphaMove(e); e.preventDefault(); }, { passive: false });

document.addEventListener('mousemove', e => {
  if (draggingCanvas) handleCanvasMove(e);
  if (draggingHue) handleHueMove(e);
  if (draggingAlpha) handleAlphaMove(e);
});
document.addEventListener('touchmove', e => {
  if (draggingCanvas) handleCanvasMove(e);
  if (draggingHue) handleHueMove(e);
  if (draggingAlpha) handleAlphaMove(e);
}, { passive: false });
document.addEventListener('mouseup', () => { draggingCanvas = draggingHue = draggingAlpha = false; });
document.addEventListener('touchend', () => { draggingCanvas = draggingHue = draggingAlpha = false; });

// --- Copy ---
function copyFrom(id, btn) {
  const text = document.getElementById(id).value;
  navigator.clipboard.writeText(text).then(() => {
    btn.textContent = 'ì™„ë£Œ'; btn.classList.add('copied');
    showToast(text + ' ë³µì‚¬ë¨');
    setTimeout(() => { btn.textContent = 'ë³µì‚¬'; btn.classList.remove('copied'); }, 1500);
  });
}

function showToast(msg) {
  const t = document.getElementById('toast');
  t.textContent = msg; t.classList.add('show');
  setTimeout(() => t.classList.remove('show'), 2000);
}

function toggleFaq(el) { el.parentElement.classList.toggle('open'); }

// --- Named colors ---
const namedColors = [
  ['Red','#FF0000'],['Crimson','#DC143C'],['OrangeRed','#FF4500'],
  ['Tomato','#FF6347'],['Coral','#FF7F50'],['DarkOrange','#FF8C00'],
  ['Orange','#FFA500'],['Gold','#FFD700'],['Yellow','#FFFF00'],
  ['GreenYellow','#ADFF2F'],['LimeGreen','#32CD32'],['Green','#008000'],
  ['Teal','#008080'],['DarkCyan','#008B8B'],['Cyan','#00FFFF'],
  ['DeepSkyBlue','#00BFFF'],['DodgerBlue','#1E90FF'],['RoyalBlue','#4169E1'],
  ['Blue','#0000FF'],['MediumBlue','#0000CD'],['Navy','#000080'],
  ['BlueViolet','#8A2BE2'],['DarkViolet','#9400D3'],['Purple','#800080'],
  ['Magenta','#FF00FF'],['DeepPink','#FF1493'],['HotPink','#FF69B4'],
  ['Pink','#FFC0CB'],['MistyRose','#FFE4E1'],['LavenderBlush','#FFF0F5'],
  ['White','#FFFFFF'],['Snow','#FFFAFA'],['Ivory','#FFFFF0'],
  ['Beige','#F5F5DC'],['Wheat','#F5DEB3'],['Tan','#D2B48C'],
  ['Peru','#CD853F'],['Chocolate','#D2691E'],['SaddleBrown','#8B4513'],
  ['Sienna','#A0522D'],['Brown','#A52A2A'],['Maroon','#800000'],
  ['DarkRed','#8B0000'],['Gray','#808080'],['DimGray','#696969'],
  ['DarkSlateGray','#2F4F4F'],['Black','#000000'],['SlateGray','#708090'],
  ['Silver','#C0C0C0'],['LightGray','#D3D3D3'],
];

const colorGrid = document.getElementById('namedColors');
namedColors.forEach(([name, hex]) => {
  const el = document.createElement('div');
  el.className = 'color-swatch';
  el.innerHTML = `<div class="swatch-circle" style="background:${hex}"></div><div class="swatch-info"><div class="swatch-name">${name}</div><div class="swatch-hex">${hex}</div></div>`;
  el.addEventListener('click', () => {
    const [r, g, b] = hexToRgb(hex);
    const [h, s, v] = rgbToHsv(r, g, b);
    hue = h; saturation = s; value = v; alpha = 1;
    drawCanvas(); updateDisplay();
    window.scrollTo({ top: 0, behavior: 'smooth' });
  });
  colorGrid.appendChild(el);
});

window.addEventListener('resize', initCanvas);
initCanvas();
updateDisplay();
</script>
</body>
</html>
